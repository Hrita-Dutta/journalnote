@using JournalNote.Models

<div class="advanced-filter">
    <div class="filter-header">
        <h5>ğŸ” Advanced Filters</h5>
        <button class="btn btn-sm btn-link text-danger" @onclick="ClearAllFilters">
            Clear All
        </button>
    </div>

    <div class="filter-section">
        <label class="filter-label">
            <span class="label-icon">ğŸ”</span>
            <strong>Search</strong>
        </label>
        <input type="text"
               class="form-control"
               placeholder="Search by title or content..."
               @bind="Filter.SearchTerm"
               @bind:event="oninput"
               @onkeyup="OnFilterChanged" />
    </div>
</div>
<!-- Date Range -->
<div class="filter-section">
    <label class="filter-label">
        <span class="label-icon">ğŸ“…</span>
        <strong>Date Range</strong>
    </label>

    <div class="date-range-inputs">
        <div class="date-input-group">
            <label class="small-label">From:</label>
            <input type="date"
                   class="form-control"
                   @bind="Filter.StartDate"
                   @onchange="OnFilterChanged" />
        </div>

        <div class="date-input-group">
            <label class="small-label">To:</label>
            <input type="date"
                   class="form-control"
                   @bind="Filter.EndDate"
                   @onchange="OnFilterChanged" />
        </div>
    </div>
</div>

<!-- Mood Category -->
<div class="filter-section">
    <label class="filter-label">
        <span class="label-icon">ğŸ˜Š</span>
        <strong>Mood Category</strong>
    </label>

    <select class="form-select" @bind="Filter.MoodCategory" @onchange="OnFilterChanged">
        <option value="">All Categories</option>
        <option value="Positive">Positive</option>
        <option value="Neutral">Neutral</option>
        <option value="Negative">Negative</option>
    </select>
</div>


@code {
    [Parameter] public EntryFilter Filter { get; set; } = new();
    [Parameter] public EventCallback OnFilterChange { get; set; }

    private async Task OnFilterChanged()
    {
        await OnFilterChange.InvokeAsync();
    }

    private async Task ClearAllFilters()
    {
        Filter.Clear();
        await OnFilterChanged();
    }
}